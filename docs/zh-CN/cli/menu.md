---
title: 主菜单
---

# 主菜单

执行 `npx ccjk` 会进入交互式菜单系统。菜单是 CCJK 的核心交互界面，提供可视化的操作选项，无需记忆复杂的命令参数。

## 菜单特点

- 🎯 **动态显示**：根据当前代码工具（Claude Code 或 Codex）动态调整菜单项
- ⌨️ **快捷键操作**：输入单个字符即可执行操作，无需记忆命令
- 🔄 **智能切换**：可以在 Claude Code 和 Codex 之间无缝切换
- 📋 **功能聚合**：所有常用功能都集中在菜单中，方便快速访问

## Claude Code 模式菜单

| 选项 | 功能 | 对应命令 | 说明 |
|------|------|---------|------|
| `1` | 完整初始化 | `ccjk init` | 完整初始化 Claude Code 环境 |
| `2` | 导入/更新工作流 | `ccjk update` | 更新工作流模板和提示词 |
| `3` | 配置 API 或 CCR | - | 配置 API 密钥、提供商或 CCR 代理 |
| `4` | 配置 MCP 服务 | - | 安装和配置 MCP 服务 |
| `5` | 配置默认模型 | - | 设置默认使用的 Claude 模型 |
| `6` | 配置 AI 记忆与输出风格 | - | 设置 AI 输出语言和全局输出风格 |
| `7` | 导入推荐环境变量与权限 | - | 配置环境变量和文件系统权限 |
| `R` | CCR 管理菜单 | `ccjk ccr` | Claude Code Router 管理 |
| `U` | Claude Code 使用分析 | `ccjk ccu` | 查看 API 使用统计 |
| `L` | CCometixLine 管理 | - | 状态栏工具管理 |
| `0` | 切换脚本语言 | - | 切换 CLI 界面语言（zh-CN/en） |
| `S` | 切换代码工具 | - | 在 Claude Code ↔ Codex 之间切换 |
| `-` | 卸载当前工具配置 | `ccjk uninstall` | 卸载 Claude Code 配置 |
| `+` | 检查更新 | `ccjk check-updates` | 检查工具版本并更新 |
| `Q` | 退出 | - | 退出菜单 |

## Codex 模式菜单

Codex 模式下的菜单会调整为 Codex 对应的操作：

- `1` - Codex 完整初始化
- `2` - 更新 Codex 工作流和模板
- `3` - 配置 Codex API 提供商或 MCP
- `4` - 配置 Codex MCP 服务
- `S` - 切换回 Claude Code
- 其他选项保持相同

> 💡 **提示**：在 Codex 模式下，菜单功能会自动适配 Codex 的配置方式，但仍可通过 `S` 随时切换回 Claude Code。

## 使用技巧

### 1. 快速操作

菜单支持快速输入，无需按确认键：

```bash
npx ccjk
# 输入 1 然后回车，直接进入完整初始化
# 输入 R 然后回车，直接进入 CCR 管理
```

### 2. 错误处理

如果输入无效字符，CLI 会提示重新输入：

```bash
npx ccjk
# 输入 X（无效选项）
# CLI 提示：无效选项，请重新输入
```

### 3. 菜单导航

可以在菜单中快速导航：

- 输入选项字符直接执行
- 随时输入 `Q` 退出菜单
- 使用 `S` 在工具间切换

### 4. 语言切换

在主菜单中输入 `0` 可以切换 CLI 语言：

```bash
npx ccjk
# 输入 0
# 选择语言：zh-CN 或 en
# 语言切换后菜单会重新显示
```

### 5. 工具切换

使用 `S` 可以在 Claude Code 和 Codex 之间切换：

```bash
npx ccjk
# 当前模式：Claude Code
# 输入 S
# 切换到：Codex 模式
# 菜单项自动调整为 Codex 对应操作
```

## 菜单功能详解

### 完整初始化（选项 1）

等同于执行 `npx ccjk init`，会引导您完成：

- 选择代码工具类型
- 配置 API（官方登录/API Key/CCR 代理）
- 选择 MCP 服务
- 选择工作流
- 选择输出风格
- 配置语言选项

### 导入/更新工作流（选项 2）

等同于执行 `npx ccjk update`，会：

- 更新工作流模板
- 更新提示词内容
- 检查工具版本
- 选择模板语言

### 配置 API 或 CCR（选项 3）

提供以下配置选项：

- 配置 API Key（自定义端点）
- 使用 API 提供商预设（302.AI、GLM 等）
- 配置 CCR 代理
- 切换回官方登录

### 配置 MCP 服务（选项 4）

管理 MCP 服务：

- 安装新的 MCP 服务
- 移除不需要的服务
- 更新服务配置
- 检查服务状态

### 配置默认模型（选项 5）

设置默认使用的 Claude 模型：

- 自动选择（Claude Code 自动选择最佳模型）
- Opus（高 token 消耗，谨慎使用）
- Sonnet 1M（大上下文窗口）
- 自定义（指定主模型和快速模型）

### 配置 AI 记忆与输出风格（选项 6）

管理 AI 行为：

- 设置 AI 输出语言
- 切换全局输出风格
- 编辑输出风格内容
- 管理项目记忆

### 导入推荐环境变量与权限（选项 7）

配置开发环境：

- 导入环境变量模板
- 配置文件系统权限
- 设置推荐的工作目录权限

### CCR 管理菜单（选项 R）

进入 CCR 专用管理界面：

- 初始化/安装 CCR
- 启动/停止/重启 CCR 服务
- 打开 CCR Web UI
- 查看 CCR 状态
- 配置路由规则

### Claude Code 使用分析（选项 U）

查看 API 使用统计：

- Token 使用量
- 成本统计
- 使用趋势
- 导出 JSON 数据

### CCometixLine 管理（选项 L）

管理状态栏工具：

- 安装/升级 CCometixLine
- 卸载 CCometixLine
- 配置状态栏格式
- 查看版本信息

### 检查更新（选项 +）

检查并更新工具：

- 检查 Claude Code 版本
- 检查 CCR 版本
- 检查 CCometixLine 版本
- 自动更新可用版本

### 卸载当前工具配置（选项 -）

安全卸载配置：

- 完整卸载所有配置
- 自定义卸载特定组件
- 保留备份选项

## 菜单实现

菜单系统在 `src/commands/menu.ts` 中实现，所有菜单选项对应的函数都可以在该文件中查看。

### 菜单流程

1. **显示菜单**：根据当前工具类型显示对应菜单
2. **等待输入**：等待用户输入选项字符
3. **执行操作**：调用对应的处理函数
4. **返回菜单**：操作完成后返回主菜单（除非退出）

### 自定义菜单

如果需要自定义菜单，可以：

1. 查看 `src/commands/menu.ts` 了解菜单结构
2. 添加新的菜单选项
3. 实现对应的处理函数
4. 重新构建项目

## 最佳实践

### 1. 首次使用

首次使用 CCJK 时，建议从菜单开始：

```bash
npx ccjk
# 选择 1 (完整初始化)
# 按照提示完成配置
```

### 2. 日常操作

日常使用中，可以直接使用命令或通过菜单：

```bash
# 快速更新工作流
npx ccjk update

# 或通过菜单
npx ccjk
# 选择 2
```

### 3. 探索功能

不熟悉命令时，使用菜单探索功能：

```bash
npx ccjk
# 浏览所有可用选项
# 尝试不同的功能
```

### 4. 团队培训

在团队培训中，菜单可以帮助新成员快速上手：

- 所有功能都在菜单中可见
- 无需记忆复杂命令
- 交互式引导更友好

## 故障排除

### 菜单无法显示

如果菜单无法正常显示：

```bash
# 1. 检查 Node.js 版本
node --version  # 需要 >= 18

# 2. 检查终端支持
# 确保终端支持 ANSI 颜色代码

# 3. 直接使用命令
npx ccjk init
```

### 菜单选项无响应

如果选择菜单选项后无响应：

```bash
# 1. 检查配置权限
ls -la ~/.ufomiao/ccjk/

# 2. 查看详细错误
npx ccjk --verbose

# 3. 重新初始化配置
npx ccjk init --config-action new
```

### 工具切换失败

如果 `S` 选项切换工具失败：

```bash
# 1. 检查配置文件
cat ~/.ufomiao/ccjk/config.toml | grep codeToolType

# 2. 手动切换
npx ccjk init -T codex  # 切换到 Codex
npx ccjk init -T claude-code  # 切换到 Claude Code
```

## 相关资源

- [ccjk init](init.md) - 完整初始化命令详解
- [ccjk update](update.md) - 更新命令详解
- [快速开始](../getting-started/installation.md) - 安装和使用指南

> 💡 **提示**：菜单是 CCJK 最友好的使用方式，特别适合不熟悉命令行的用户。建议首次使用时通过菜单完成配置，熟悉后可以结合直接命令使用提高效率。