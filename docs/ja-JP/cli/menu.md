---
title: メインメニュー
---

# メインメニュー

`npx ccjk` を実行すると、対話式メニューシステムに入ります。メニューは CCJK のコアインターフェースで、視覚的な操作オプションを提供し、複雑なコマンドパラメータを覚える必要がありません。

## メニューの特徴

- 🎯 **動的表示**：現在のコードツール（Claude Code または Codex）に応じてメニュー項目を動的に調整
- ⌨️ **ショートカット操作**：1文字入力するだけで操作を実行でき、コマンドを覚える必要がない
- 🔄 **インテリジェント切替**：Claude Code と Codex の間でシームレスに切替可能
- 📋 **機能の集約**：すべてのよく使う機能がメニューに集約され、すばやくアクセス可能

## Claude Code モードメニュー

| オプション | 機能 | 対応コマンド | 説明 |
|------|------|---------|------|
| `1` | 完全初期化 | `ccjk init` | Claude Code 環境を完全に初期化 |
| `2` | ワークフローのインポート/更新 | `ccjk update` | ワークフローテンプレートとプロンプトを更新 |
| `3` | API または CCR を設定 | - | API キー、プロバイダー、または CCR プロキシを設定 |
| `4` | MCP サービスを設定 | - | MCP サービスのインストールと設定 |
| `5` | デフォルトモデルを設定 | - | 使用するデフォルトの Claude モデルを設定 |
| `6` | AI メモリと出力スタイルを設定 | - | AI 出力言語とグローバル出力スタイルを設定 |
| `7` | 推奨環境変数と権限をインポート | - | 環境変数とファイルシステム権限を設定 |
| `R` | CCR 管理メニュー | `ccjk ccr` | Claude Code Router 管理 |
| `U` | Claude Code 使用分析 | `ccjk ccu` | API 使用統計を表示 |
| `L` | CCometixLine 管理 | - | ステータスバーツール管理 |
| `0` | スクリプト言語を切替 | - | CLI インターフェース言語を切替（zh-CN/en） |
| `S` | コードツールを切替 | - | Claude Code ↔ Codex の間で切替 |
| `-` | 現在のツール設定をアンインストール | `ccjk uninstall` | Claude Code 設定をアンインストール |
| `+` | 更新を確認 | `ccjk check-updates` | ツールバージョンを確認して更新 |
| `Q` | 終了 | - | メニューを終了 |

## Codex モードメニュー

Codex モードでは、メニューが Codex に対応する操作に調整されます：

- `1` - Codex 完全初期化
- `2` - Codex ワークフローとテンプレートを更新
- `3` - Codex API プロバイダーまたは MCP を設定
- `4` - Codex MCP サービスを設定
- `S` - Claude Code に切替
- その他のオプションは同じ

> 💡 **ヒント**：Codex モードでは、メニュー機能が自動的に Codex の設定方式に適応しますが、`S` でいつでも Claude Code に戻すことができます。

## 使用のヒント

### 1. クイック操作

メニューはクイック入力をサポートし、確認キーを押す必要がありません：

```bash
npx ccjk
# 1 を入力して Enter を押すと、直接完全初期化に入る
# R を入力して Enter を押すと、直接 CCR 管理に入る
```

### 2. エラー処理

無効な文字を入力した場合、CLI は再入力を促します：

```bash
npx ccjk
# X を入力（無効なオプション）
# CLI プロンプト：無効なオプション、再入力してください
```

### 3. メニューナビゲーション

メニュー内で素早くナビゲートできます：

- オプション文字を入力して直接実行
- いつでも `Q` を入力してメニューを終了
- `S` を使用してツール間を切替

### 4. 言語切替

メインメニューで `0` を入力すると、CLI 言語を切替できます：

```bash
npx ccjk
# 0 を入力
# 言語を選択：zh-CN または en
# 言語切替後、メニューが再表示される
```

### 5. ツール切替

`S` を使用して Claude Code と Codex の間を切替できます：

```bash
npx ccjk
# 現在のモード：Claude Code
# S を入力
# 切替：Codex モード
# メニュー項目が自動的に Codex 対応操作に調整される
```

## メニュー機能の詳細

### 完全初期化（オプション 1）

`npx ccjk init` を実行するのと同じで、以下を案内します：

- コードツールタイプを選択
- API を設定（公式ログイン/API Key/CCR プロキシ）
- MCP サービスを選択
- ワークフローを選択
- 出力スタイルを選択
- 言語オプションを設定

### ワークフローのインポート/更新（オプション 2）

`npx ccjk update` を実行するのと同じで、以下を実行します：

- ワークフローテンプレートを更新
- プロンプト内容を更新
- ツールバージョンを確認
- テンプレート言語を選択

### API または CCR を設定（オプション 3）

以下の設定オプションを提供します：

- API Key を設定（カスタムエンドポイント）
- API プロバイダープリセットを使用（302.AI、GLM など）
- CCR プロキシを設定
- 公式ログインに戻す

### MCP サービスを設定（オプション 4）

MCP サービスを管理します：

- 新しい MCP サービスをインストール
- 不要なサービスを削除
- サービス設定を更新
- サービス状態を確認

### デフォルトモデルを設定（オプション 5）

使用するデフォルトの Claude モデルを設定します：

- 自動選択（Claude Code が最適なモデルを自動選択）
- Opus（高トークン消費、注意して使用）
- Sonnet 1M（大コンテキストウィンドウ）
- カスタム（メインモデルと高速モデルを指定）

### AI メモリと出力スタイルを設定（オプション 6）

AI の動作を管理します：

- AI 出力言語を設定
- グローバル出力スタイルを切替
- 出力スタイル内容を編集
- プロジェクトメモリを管理

### 推奨環境変数と権限をインポート（オプション 7）

開発環境を設定します：

- 環境変数テンプレートをインポート
- ファイルシステム権限を設定
- 推奨作業ディレクトリ権限を設定

### CCR 管理メニュー（オプション R）

CCR 専用管理インターフェースに入ります：

- CCR を初期化/インストール
- CCR サービスを起動/停止/再起動
- CCR Web UI を開く
- CCR 状態を表示
- ルーティングルールを設定

### Claude Code 使用分析（オプション U）

API 使用統計を表示します：

- トークン使用量
- コスト統計
- 使用傾向
- JSON データをエクスポート

### CCometixLine 管理（オプション L）

ステータスバーツールを管理します：

- CCometixLine をインストール/アップグレード
- CCometixLine をアンインストール
- ステータスバー形式を設定
- バージョン情報を表示

### 更新を確認（オプション +）

ツールを確認して更新します：

- Claude Code バージョンを確認
- CCR バージョンを確認
- CCometixLine バージョンを確認
- 利用可能なバージョンを自動更新

### 現在のツール設定をアンインストール（オプション -）

設定を安全にアンインストールします：

- すべての設定を完全にアンインストール
- 特定のコンポーネントをカスタムアンインストール
- バックアップオプションを保持

## メニューの実装

メニューシステムは `src/commands/menu.ts` で実装されており、すべてのメニューオプションに対応する関数をこのファイルで確認できます。

### メニューフロー

1. **メニューを表示**：現在のツールタイプに応じて対応するメニューを表示
2. **入力を待機**：ユーザーがオプション文字を入力するのを待機
3. **操作を実行**：対応する処理関数を呼び出し
4. **メニューに戻る**：操作完了後、メインメニューに戻る（終了しない限り）

### カスタムメニュー

メニューをカスタマイズする必要がある場合：

1. `src/commands/menu.ts` を確認してメニュー構造を理解
2. 新しいメニューオプションを追加
3. 対応する処理関数を実装
4. プロジェクトを再ビルド

## ベストプラクティス

### 1. 初回使用

CCJK を初めて使用する場合、メニューから始めることをお勧めします：

```bash
npx ccjk
# 1 (完全初期化) を選択
# プロンプトに従って設定を完了
```

### 2. 日常操作

日常使用では、コマンドを直接使用するか、メニューを通じて使用できます：

```bash
# ワークフローをすばやく更新
npx ccjk update

# またはメニューを通じて
npx ccjk
# 2 を選択
```

### 3. 機能の探索

コマンドに慣れていない場合、メニューを使用して機能を探索します：

```bash
npx ccjk
# すべての利用可能なオプションを閲覧
# 異なる機能を試す
```

### 4. チームトレーニング

チームトレーニングでは、メニューが新メンバーの迅速な習得を支援します：

- すべての機能がメニューで見える
- 複雑なコマンドを覚える必要がない
- 対話式ガイドがより親しみやすい

## トラブルシューティング

### メニューが表示されない

メニューが正常に表示されない場合：

```bash
# 1. Node.js バージョンを確認
node --version  # >= 18 が必要

# 2. ターミナルサポートを確認
# ターミナルが ANSI カラーコードをサポートしていることを確認

# 3. コマンドを直接使用
npx ccjk init
```

### メニューオプションが応答しない

メニューオプションを選択した後に応答がない場合：

```bash
# 1. 設定権限を確認
ls -la ~/.ufomiao/ccjk/

# 2. 詳細エラーを確認
npx ccjk --verbose

# 3. 設定を再初期化
npx ccjk init --config-action new
```

### ツール切替が失敗する

`S` オプションでツール切替が失敗する場合：

```bash
# 1. 設定ファイルを確認
cat ~/.ufomiao/ccjk/config.toml | grep codeToolType

# 2. 手動で切替
npx ccjk init -T codex  # Codex に切替
npx ccjk init -T claude-code  # Claude Code に切替
```

## 関連リソース

- [ccjk init](init.md) - 完全初期化コマンドの詳細
- [ccjk update](update.md) - 更新コマンドの詳細
- [クイックスタート](../getting-started/installation.md) - インストールと使用ガイド

> 💡 **ヒント**：メニューは CCJK の最も親しみやすい使用方法で、コマンドラインに慣れていないユーザーに特に適しています。初回使用時はメニューを通じて設定を完了し、慣れたら直接コマンドと組み合わせて使用して効率を向上させることをお勧めします。
